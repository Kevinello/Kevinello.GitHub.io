<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Kevinello - 早安，打工人</title><meta name="keywords" content="打工人,后端,虚拟化,后台开发,Python,Golang"><meta name="author" content="Kevinello"><meta name="copyright" content="Kevinello"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website"><meta property="og:title" content="Kevinello"><meta property="og:url" content="http://kevinello.ltd/page/2/index.html"><meta property="og:site_name" content="Kevinello"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://kevinello-1302687393.file.myqcloud.com/picgo/2022/04/11/myself-e3fde6.png"><meta property="article:author" content="Kevinello"><meta property="article:tag" content="打工人"><meta property="article:tag" content="后端"><meta property="article:tag" content="虚拟化"><meta property="article:tag" content="后台开发"><meta property="article:tag" content="Python"><meta property="article:tag" content="Golang"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kevinello-1302687393.file.myqcloud.com/picgo/2022/04/11/myself-e3fde6.png"><link rel="shortcut icon" href="/imgs/K.jpg"><link rel="canonical" href="http://kevinello.ltd/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?d2a20aecba22b2eaf60183c4831d9a52";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RV8K5FBVX5"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RV8K5FBVX5")</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"13UJR6CRNO","apiKey":"456e56f51ec27a1e13d67bef144f6747","indexName":"Kevinello_blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":180,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Kevinello",isPost:!1,isHome:!0,isHighlightShrink:!1,isToc:!1,postUpdate:"2022-10-08 19:25:53"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2232093_k6128tldgy.css"><meta name="generator" content="Hexo 5.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://kevinello-1302687393.file.myqcloud.com/picgo/2022/04/11/myself-e3fde6.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">83</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image:url(https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20210508141119.jpeg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kevinello</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Kevinello</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/kevinello" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/23149976" target="_blank" title="Bilibili"><i class="iconfont icon-bilibili-fill"></i></a><a class="social-icon" href="mailto:kevinello42@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/10/%E5%B0%8F%E5%88%AE%E5%88%AEScrapy/" title="小刮刮Scrapy"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20220110152859.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="小刮刮Scrapy"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/10/%E5%B0%8F%E5%88%AE%E5%88%AEScrapy/" title="小刮刮Scrapy">小刮刮Scrapy</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-10T07:30:10.000Z" title="发表于 2022-01-10 15:30:10">2022-01-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">前言 从大二开始接触python，到现在已经是第三个年头了；随着入职腾讯，进入云原生行业后，python已经不再是我的主要开发语言，我转而收养了golang小地鼠成为了一名gopher 但python依然是我的工具人好伙伴（日常生活中一旦有自动化的念头也会直接想到python），并且作为数据工作者，对于python的数据处理能力还是挺依赖的，golang的生态也没有好到能面面俱到 鄙人大二时课设写过一个小小的b站爬虫（基于bs4, re和selenium等简单写的），最后也只是草草爬了几十万的用户数据以及几百万的视频数据，做了做没有什么意义的词频分析，而scrapy作为我一定会忘记的爬虫必会知识，还是有必要写一篇小笔记record一下的 需要了解的词 网络爬虫：泛指获取网页信息，提取有用信息的行为 selenium: web自动化测试工具集，但在爬虫工程中也经常使用，模拟人的点击操作驱动浏览器来获取网页信息 Scrapy是什么 Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用框架。 可以应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。其最初是为了 页 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/10/%E9%9D%A2%E8%AF%95%E5%AE%98%E5%88%9D%E4%BD%93%E9%AA%8C/" title="面试官初体验"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20220110130328.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="面试官初体验"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/10/%E9%9D%A2%E8%AF%95%E5%AE%98%E5%88%9D%E4%BD%93%E9%AA%8C/" title="面试官初体验">面试官初体验</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-10T04:59:10.000Z" title="发表于 2022-01-10 12:59:10">2022-01-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">前言 近期作为后台开发面试官整理的一些简单面试题（仅供参考仅供参考仅供参考 基础题 Golang Golang中函数调用是传值还是传引用 golang中所有函数参数传递都是传值，slice、map和chan看上去像传引用只是因为他们内部有指针或本身就是指针而已；slice结构体里有一个指向底层数组array的指针，所以slice在作为函数参数传递进去的时候，虽然和map以及chan一样可以修改其中的值，但是内部slice若使用append之类的方法修改了大小，则这部分长度信息的变化不会反馈到外层slice中，甚至会因为底层数组扩容（cap扩充）导致内外slice指向了不同的底层数组；而map和chan因为本质上就是指针，故所有函数内的变动都会反馈到外面，除非在函数内部改变了这些指针指向的内存（这也是map和chan的copy的实现方法） Golang中make和new的区别？ make 只能用来分配及初始化类型为 slice、map、chan的数据，new可以分配任意类型的数据 new 分配返回的是指针，即类型 *Type。make 返回引用，即 Type new 分配 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/10/18/Whosbug%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%972/" title="Whosbug项目日志2"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20211018194549.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Whosbug项目日志2"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/18/Whosbug%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%972/" title="Whosbug项目日志2">Whosbug项目日志2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-18T11:41:15.000Z" title="发表于 2021-10-18 19:41:15">2021-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/">项目日志</a></span></div><div class="content">背景信息 团队规模 whosbug经手了多个团队的近20人，历史团队中：大家分别负责插件和数据流转的设计实现和优化、责任归属算法的设计实现与优化、antlr语法AST分析的多语言适配实现以及项目协同的管理；当前主要由kevineluo和kevinmatthe负责维护以及开源相关的规划，同时开源团队也有其它8位同学一起协作共建 业务内容 提供DevOps流程中的CI流水线插件，为线上项目提供发生错误时实时归属责任人的能力 项目诉求 关键痛点 在很多大型项目中，一个重要缺陷往往会在不同的人手中流转很多次，这会导致很多不必要的时间成本和人力成本，甚至在一些情况下会引发新的问题（如修复人在对模块不熟悉的情况下进行了不恰当的bugfix） 项目目标 whosbug致力于解决责任人归属这一问题的一个微服务，精确的定位到每一个crash / bug的责任人，缩短缺陷修复流程；同时也能在语法树这一层级为项目提供部分统计信息 项目现状 初版尝试在自动化测试产品（NewMonkey）、移动性能监控（QAPM）场景中接入了whosbug；近期也进行了一些更新，解决了下面提到的一些问题，不久后 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/10/13/Keyman%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6/" title="Keyman算法设计哲学"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20211013151243.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Keyman算法设计哲学"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/13/Keyman%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6/" title="Keyman算法设计哲学">Keyman算法设计哲学</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-13T07:11:41.000Z" title="发表于 2021-10-13 15:11:41">2021-10-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">前言 whosbug项目中，最重要的无非是两个部分： 对接入项目的AST静态语法解析 责任人归属算法 ​ whosbug初版发布后我们进行了一系列的测试，发现了老算法在一些场景下的局限性（如对没有第三方库调用的处理、多语言下的泛用性不足等问题） ​ 于是在参考了部分论文后，我们结合实际落地场景设计了新的责任人归属算法 —— Keyman，本文我们就详细介绍下算法设计 主要设计思想 函数唯一标识 为了清晰一个函数在语法树中的精确位置，首先我们需要每个函数的唯一标识，这里我们的标识为： 并且包 / 类也视作一个函数，将包/类内的代码非函数内代码归入这个包 / 类的函数 获取可能和这次错误相关的函数 Init: 获取预设的迭代次数NUMBER_OF_ITERATION，新建相关方法集methods，以错误堆栈中涉及的所有方法为初值 不断地从methods内的每个函数/方法找到与其相连且未在methods内的方法，加入methods中，也同时得到该方法与直接错误方法的距离。如此全面进行NUMBER_OF_ITERATION次 1234567891011NUMBER_OF_ ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/10/08/TraceSim%E7%AE%97%E6%B3%95%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/" title="TraceSim算法深入浅出"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20210508141907.jpeg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="TraceSim算法深入浅出"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/08/TraceSim%E7%AE%97%E6%B3%95%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/" title="TraceSim算法深入浅出">TraceSim算法深入浅出</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-08T02:32:54.000Z" title="发表于 2021-10-08 10:32:54">2021-10-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">前言 现有研究使用的stack trace距离度量主要有以下两种： information retrieval techniques(基于信息检索技术) string matching methods(基于字符串匹配技术) Rebucket就是string matching methods的一种，这篇论文主要提出了TraceSim这一结合了两种方法的堆栈相似度度量方法 需要了解的词 Levenshtein Distance Calculation: 基于string matching methods的一种堆栈间距离的度量算法（本文中的Levenshtein Distance Calculation是其改进版本，下面会展开讲） TF-IDF: 基于information retrieval techniques的一种堆栈间距离的度量算法，其中TF代表单帧的重要程度，IDF代表单帧的罕见程度 TraceSim a novel approach to this problem which combines TF-IDF, Levenshtein distance, and m ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/14/Service-Mesh%E5%9C%A8%E6%8E%A5%E5%85%A5%E5%B1%82%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86%E7%9A%84%E5%BA%94%E7%94%A8/" title="Service Mesh在接入层流量管理的应用"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20210614183524.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Service Mesh在接入层流量管理的应用"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/14/Service-Mesh%E5%9C%A8%E6%8E%A5%E5%85%A5%E5%B1%82%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86%E7%9A%84%E5%BA%94%E7%94%A8/" title="Service Mesh在接入层流量管理的应用">Service Mesh在接入层流量管理的应用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-14T10:32:54.000Z" title="发表于 2021-06-14 18:32:54">2021-06-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">service mesh是什么 A service mesh, like the open source project Istio, is a way to control how different parts of an application share data with one another. Unlike other systems for managing this communication, a service mesh is a dedicated infrastructure layer built right into an app. This visible infrastructure layer can document how well (or not) different parts of an app interact, so it becomes easier to optimize communication and avoid downtime as an app grows. Each part of an app, called a ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/14/Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0/" title="Redis分布式锁的基本实现"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20210508140417.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Redis分布式锁的基本实现"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/14/Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0/" title="Redis分布式锁的基本实现">Redis分布式锁的基本实现</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-14T08:06:31.000Z" title="发表于 2021-06-14 16:06:31">2021-06-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">前言 随着分布式系统的普遍运用，分布式锁的重要性也得到了体现 在单机系统中，我们可以运用普通的锁/信号量机制来实现对公共资源的有序访问；但在分布式系统中显然就不行了 因此业界常用的解决方案通常是借助于一个第三方组件，利用它自身的排他性来达到多进程的互斥；如： 基于 DB 的唯一索引 基于 ZK 的临时有序节点 基于 Redis 的 NX EX 参数 本文就主要以Redis分布式锁展开 需要了解的几个词 锁机制：锁是在执行多线程时用于强行限制资源访问的同步机制，即用于在并发控制中保证对互斥要求的满足（Wiki百科） 死锁：死锁是指两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。 此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程 ZK：即ZooKeeper，ZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等 Redis分布式锁的基本原理 既然是选用了 Redis， ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/04/19/%E4%BB%8ERedis%E4%BA%8B%E5%8A%A1%E5%88%B0Redis-pipeline/" title="从Redis事务到Redis pipeline"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20210406093557.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="从Redis事务到Redis pipeline"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/19/%E4%BB%8ERedis%E4%BA%8B%E5%8A%A1%E5%88%B0Redis-pipeline/" title="从Redis事务到Redis pipeline">从Redis事务到Redis pipeline</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-19T03:15:07.000Z" title="发表于 2021-04-19 11:15:07">2021-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">前言 相信对关系性数据库有使用经验的，都对事务操作很熟悉，为了确保连续多个操作的原子性，我们常用的数据库都会有事务的支持，Redis 也不例外；但它又和关系型数据库支持的事务不太一样 需要了解的几个词 事务：数据库事务通常包含了一个序列的对数据库的读/写操作。包含有以下两个目的： 为数据库操作序列提供了一个从失败中恢复到正常状态的方法，同时提供了数据库即使在异常状态下仍能保持一致性的方法 当多个应用程序在并发访问数据库时，可以在这些应用程序之间提供一个隔离方法，以防止彼此的操作互相干扰 ACID：关系性数据库事务具有的四个特性：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability） 悲观锁(Pessimistic Lock)：顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会 block 直到它拿到锁。传统的关系型数据库里边就用到了很多这种锁机制，比如行锁，表锁等，读锁，写锁等，都是在做操作之前先上锁 乐观锁(Optimistic Lock) ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/04/11/Redis%E5%86%85%E5%AD%98%E7%A2%8E%E7%89%87%E7%9A%84%E4%BA%A7%E7%94%9F%E4%B8%8E%E6%B8%85%E7%90%86/" title="Redis内存碎片的产生与清理"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20210411164926.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Redis内存碎片的产生与清理"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/11/Redis%E5%86%85%E5%AD%98%E7%A2%8E%E7%89%87%E7%9A%84%E4%BA%A7%E7%94%9F%E4%B8%8E%E6%B8%85%E7%90%86/" title="Redis内存碎片的产生与清理">Redis内存碎片的产生与清理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-11T08:35:14.000Z" title="发表于 2021-04-11 16:35:14">2021-04-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">前言 在做redis内存清理时我们会关注redis的实时内存占用，即通过info memory命令查看内存使用情况： 我们比较常关注的是used_memory以及used_memory_rss，这两项分别是redis中的数据占用的内存以及redis向操作系统申请的所有内存，可以看到这里这两项差距是很大的，我们也可以通过另一项更直观的观察这两项的差距，即mem_fragmentation_ratio mem_fragmentation_ratio = used_memory_rss / used_memory 但Redis申请了这么多内存是在干啥呢？？？非常的疑惑 需要了解的几个词 used_memory: Amount of memory (in bytes) used by Redis used_memory_rss: Memory allocated by the operating system mem_fragmentation_ratio: Ratio of memory allocated by the operating system to memory re ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/03/17/Python-asyncio%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/" title="Python-asyncio异步编程基础"><img class="post_bg" src="https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/02141902_04_compressed.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Python-asyncio异步编程基础"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/17/Python-asyncio%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/" title="Python-asyncio异步编程基础">Python-asyncio异步编程基础</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-17T06:17:53.000Z" title="发表于 2021-03-17 14:17:53">2021-03-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="content">前言 asyncio是Python 3.4版本引入的标准库，直接内置了对异步IO的支持，并且如今asyncio的单线程异步性能已经做到与Go / Node持平 目前还没有基于asyncio开发大型项目的经历（主要还是在用golang） 需要了解的几个词 协程（coroutine）：与线程很相似，不同之处在于多协程是同一个线程来执行的，这样就省去了线程切换的时间，而且不需要多线程的锁机制了，执行效率高很多 异步IO：异步IO的概念和同步IO相对。当一个异步过程调用发出后，调用者不能立刻得到结果。实际处理这个调用的部件在完成后，通过状态、通知和回调来通知调用者 事件循环：事件循环是一种处理多并发量的有效方式，在维基百科中它被描述为「一种等待程序分配事件或消息的编程架构」，我们可以定义事件循环来简化使用轮询方法来监控事件，通俗的说法就是「当A发生时，执行B」 asyncio 是什么 asyncio模块提供了使用协程构建并发应用的工具，它使用一种单线程单进程的的方式实现并发，应用的各个部分彼此合作, 可以显式的切换任务，一般会在程序阻塞I/O操作的时候发生上下文切换如等待读写文件,或 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://kevinello-1302687393.file.myqcloud.com/picgo/2022/04/11/myself-e3fde6.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Kevinello</div><div class="author-info__description"></div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">83</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kevinello"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/kevinello" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/23149976" target="_blank" title="Bilibili"><i class="iconfont icon-bilibili-fill"></i></a><a class="social-icon" href="mailto:kevinello42@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/08/10/notion-%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" title="notion 初步使用指南"><img src="https://kevinello-1302687393.file.myqcloud.com/picgo/2022/08/28/Notion_app_logo-64956b.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="notion 初步使用指南"></a><div class="content"><a class="title" href="/2022/08/10/notion-%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" title="notion 初步使用指南">notion 初步使用指南</a><time datetime="2022-08-09T17:49:07.000Z" title="发表于 2022-08-10 01:49:07">2022-08-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/01/%E5%A4%A7%E4%B8%80%E7%BB%9F%E7%AC%A6%E5%8F%B7%E8%BF%98%E5%8E%9F/" title="大一统符号还原"><img src="https://kevinello-1302687393.file.myqcloud.com/picgo/2022/08/03/image-20220803133758954-65fb61.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="大一统符号还原"></a><div class="content"><a class="title" href="/2022/08/01/%E5%A4%A7%E4%B8%80%E7%BB%9F%E7%AC%A6%E5%8F%B7%E8%BF%98%E5%8E%9F/" title="大一统符号还原">大一统符号还原</a><time datetime="2022-08-01T06:11:30.000Z" title="发表于 2022-08-01 14:11:30">2022-08-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/17/%E6%B5%85%E8%B0%88%E6%B5%81%E7%A8%8B-in-2022/" title="浅谈流程 in 2022"><img src="http://kevinello-1302687393.file.myqcloud.com/picgo/2022/07/17/755134-27e050.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="浅谈流程 in 2022"></a><div class="content"><a class="title" href="/2022/07/17/%E6%B5%85%E8%B0%88%E6%B5%81%E7%A8%8B-in-2022/" title="浅谈流程 in 2022">浅谈流程 in 2022</a><time datetime="2022-07-17T02:08:17.000Z" title="发表于 2022-07-17 10:08:17">2022-07-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/05/Git-%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8-1/" title="Git 进阶使用1"><img src="https://kevinello-1302687393.file.myqcloud.com/picgo/2022/10/08/baby-git-release-6ede8f.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Git 进阶使用1"></a><div class="content"><a class="title" href="/2022/07/05/Git-%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8-1/" title="Git 进阶使用1">Git 进阶使用1</a><time datetime="2022-07-05T09:00:36.000Z" title="发表于 2022-07-05 17:00:36">2022-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/13/Golang-panic-recover-%E8%AF%A6%E8%A7%A3/" title="Golang panic&amp;recover 详解"><img src="http://kevinello-1302687393.file.myqcloud.com/picgo/2022/07/05/1-3N1cYeaexHSCofJq9fo3gQ-d27c5c.jpeg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Golang panic&amp;recover 详解"></a><div class="content"><a class="title" href="/2022/06/13/Golang-panic-recover-%E8%AF%A6%E8%A7%A3/" title="Golang panic&amp;recover 详解">Golang panic&amp;recover 详解</a><time datetime="2022-06-13T11:35:31.000Z" title="发表于 2022-06-13 19:35:31">2022-06-13</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline"><i class="fas fa-folder-open"></i> <span>分类</span></div><ul class="card-category-list" id="aside-cat-list"><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/"><span class="card-category-list-name">个人总结</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"><span class="card-category-list-name">技术总结</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/"><span class="card-category-list-name">技术文章</span><span class="card-category-list-count">27</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/%E6%96%87%E6%A1%A3/"><span class="card-category-list-name">文档</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/%E8%B8%A9%E5%9D%91/"><span class="card-category-list-name">踩坑</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/"><span class="card-category-list-name">项目日志</span><span class="card-category-list-count">3</span></a></li></ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Apple/" style="font-size:1.1em;color:#999">Apple</a> <a href="/tags/Apple-silicon/" style="font-size:1.1em;color:#999">Apple silicon</a> <a href="/tags/CICD/" style="font-size:1.1em;color:#999">CICD</a> <a href="/tags/Crash-Clustering/" style="font-size:1.1em;color:#999">Crash Clustering</a> <a href="/tags/DEM/" style="font-size:1.16em;color:#999b9e">DEM</a> <a href="/tags/Django/" style="font-size:1.16em;color:#999b9e">Django</a> <a href="/tags/Docker/" style="font-size:1.39em;color:#99a4b4">Docker</a> <a href="/tags/Git/" style="font-size:1.1em;color:#999">Git</a> <a href="/tags/Golang/" style="font-size:1.5em;color:#99a9bf">Golang</a> <a href="/tags/Grafana/" style="font-size:1.1em;color:#999">Grafana</a> <a href="/tags/Grid-Search/" style="font-size:1.1em;color:#999">Grid-Search</a> <a href="/tags/Hash/" style="font-size:1.1em;color:#999">Hash</a> <a href="/tags/Istio/" style="font-size:1.1em;color:#999">Istio</a> <a href="/tags/Java/" style="font-size:1.1em;color:#999">Java</a> <a href="/tags/Kubenetes/" style="font-size:1.33em;color:#99a2af">Kubenetes</a> <a href="/tags/LRU/" style="font-size:1.1em;color:#999">LRU</a> <a href="/tags/Minecraft/" style="font-size:1.16em;color:#999b9e">Minecraft</a> <a href="/tags/Notion/" style="font-size:1.1em;color:#999">Notion</a> <a href="/tags/Python/" style="font-size:1.5em;color:#99a9bf">Python</a> <a href="/tags/ReBucket/" style="font-size:1.16em;color:#999b9e">ReBucket</a> <a href="/tags/Redis/" style="font-size:1.44em;color:#99a7ba">Redis</a> <a href="/tags/SSH/" style="font-size:1.1em;color:#999">SSH</a> <a href="/tags/Service-Mesh/" style="font-size:1.1em;color:#999">Service Mesh</a> <a href="/tags/Whosbug/" style="font-size:1.27em;color:#99a0a9">Whosbug</a> <a href="/tags/antlr4/" style="font-size:1.21em;color:#999ea4">antlr4</a> <a href="/tags/arm64/" style="font-size:1.1em;color:#999">arm64</a> <a href="/tags/asyncio/" style="font-size:1.1em;color:#999">asyncio</a> <a href="/tags/centos/" style="font-size:1.1em;color:#999">centos</a> <a href="/tags/ctags/" style="font-size:1.1em;color:#999">ctags</a> <a href="/tags/java/" style="font-size:1.1em;color:#999">java</a> <a href="/tags/kafka/" style="font-size:1.1em;color:#999">kafka</a> <a href="/tags/mod/" style="font-size:1.1em;color:#999">mod</a> <a href="/tags/pandas/" style="font-size:1.1em;color:#999">pandas</a> <a href="/tags/ppt/" style="font-size:1.1em;color:#999">ppt</a> <a href="/tags/redis/" style="font-size:1.1em;color:#999">redis</a> <a href="/tags/remote%E8%B0%83%E8%AF%95/" style="font-size:1.1em;color:#999">remote调试</a> <a href="/tags/stata/" style="font-size:1.1em;color:#999">stata</a> <a href="/tags/tracing/" style="font-size:1.1em;color:#999">tracing</a> <a href="/tags/vscode/" style="font-size:1.1em;color:#999">vscode</a> <a href="/tags/web%E7%88%AC%E8%99%AB/" style="font-size:1.1em;color:#999">web爬虫</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"><i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">36</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">75.6k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastpushdate="2022-10-08T11:25:53.317Z"></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://kevinello-1302687393.cos.ap-hongkong.myqcloud.com/img/20210508141119.jpeg)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Kevinello</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">🥳 🥳 🥳 🥳 🥳</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Algolia</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script src="/js/search/optimized_algolia.js"></script><div class="js-pjax"><script>function subtitleType(){window.typed=new Typed("#subtitle",{strings:["Come and make a MOVE","I ain't got no MONEY","Do not go gentle into that good night"],startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}"function"==typeof Typed?subtitleType():getScript("https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js").then(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script async data-pjax src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>